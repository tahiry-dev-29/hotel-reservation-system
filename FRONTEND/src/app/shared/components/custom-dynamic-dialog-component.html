<div class="p-6 flex flex-col items-center bg-gray-50 dark:bg-gray-900 rounded-lg shadow-inner w-full">
  <h2 class="text-3xl font-bold mb-6 text-center text-gray-900 dark:text-gray-100">R√©servez votre s√©jour üè®</h2>
  <p class="mb-6 text-center text-gray-700 dark:text-gray-300 max-w-2xl leading-relaxed">
    Veuillez fournir les informations n√©cessaires pour compl√©ter votre demande de r√©servation.
  </p>

  <div class="mb-8 p-4 bg-blue-50 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-lg shadow-md w-full max-w-3xl text-center border border-blue-200 dark:border-blue-700">
    <strong class="font-semibold">Message Initial :</strong> {{ initialMessage() }}
  </div>

  <div class="mb-8 w-full max-w-3xl p-6 bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 grid grid-cols-1 md:grid-cols-2 gap-6">
    <h3 class="text-2xl font-semibold mb-4 text-center col-span-full text-gray-800 dark:text-gray-100">Vos D√©tails (Modifiable)</h3>

    <div class="col-span-full sm:col-span-1">
      <label for="userName" class="block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300">Nom complet :</label>
      <input
        id="userName"
        type="text"
        pInputText
        [(ngModel)]="_userName"
        placeholder="Entrez votre nom"
        class="w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 transition-all duration-200 shadow-sm"
      />
    </div>

    <div class="col-span-full sm:col-span-1">
      <label for="userEmail" class="block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300">Email :</label>
      <input
        id="userEmail"
        type="email"
        pInputText
        [(ngModel)]="_userEmail"
        placeholder="Entrez votre email"
        class="w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 transition-all duration-200 shadow-sm"
      />
    </div>

    <div class="col-span-full sm:col-span-1">
      <label for="selectedCategory" class="block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300">Cat√©gorie :</label>
      <p-autoComplete
        id="selectedCategory"
        [(ngModel)]="_selectedCategory"
        [suggestions]="_filteredCategories()"
        (completeMethod)="filterCategories($event)"
        field="name"
        placeholder="S√©lectionnez une cat√©gorie"
        [dropdown]="true"
        class="w-full p-fluid"
        inputStyleClass="w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 transition-all duration-200 shadow-sm"
      ></p-autoComplete>
    </div>

    <div class="col-span-full sm:col-span-1">
      <label for="startDate" class="block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300">Date d'arriv√©e :</label>
      <p-datepicker
        id="startDate"
        [(ngModel)]="_startDate"
        [showIcon]="true"
        [touchUI]="true"
        dateFormat="dd/mm/yy"
        placeholder="S√©lectionnez une date"
        class="w-full p-fluid"
        inputStyleClass="w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 transition-all duration-200 shadow-sm"
      ></p-datepicker>
    </div>

    <div class="col-span-full">
      <label for="description" class="block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300">Message / Requ√™te Sp√©ciale :</label>
      <textarea
        id="description"
        [(ngModel)]="_description"
        [rows]="4"
        [cols]="30"
        placeholder="Dites-nous si vous avez des requ√™tes sp√©ciales ou des questions..."
        class="w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 transition-all duration-200 shadow-sm"
        [autoResize]="true"
        pTextarea
      ></textarea>
    </div>

    <div class="col-span-full">
      <label for="tags" class="block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300">Services Souhait√©s :</label>
      <p-multiSelect
        id="tags"
        [options]="_availableTags()"
        [(ngModel)]="_tags"
        optionLabel="name"
        placeholder="S√©lectionnez des services suppl√©mentaires"
        [filter]="false"
        class="w-full p-fluid"
        display="chip"
        panelStyleClass="shadow-md rounded-lg"
      ></p-multiSelect>
    </div>

    <div class="flex items-center mt-4 col-span-full">
      <p-checkbox
        [(ngModel)]="_isSubscribed"
        inputId="subscribed"
        [binary]="true"
        class="mr-3"
      ></p-checkbox>
      <label for="subscribed" class="text-base font-medium text-gray-700 dark:text-gray-300">Abonnez-vous √† notre newsletter pour les offres exclusives</label>
    </div>
  </div>

  <div class="mb-8 w-full max-w-3xl p-6 bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 overflow-x-auto">
    <h3 class="text-2xl font-semibold mb-4 text-center text-gray-800 dark:text-gray-100">Services Additifs (Exemple)</h3>
    <p-table [value]="products()" [tableStyle]="{'min-width': '25rem'}" class="p-datatable-gridlines p-datatable-striped rounded-lg overflow-hidden">
      <ng-template pTemplate="header">
        <tr class="bg-blue-50 dark:bg-blue-900">
          <th class="p-4 text-left font-semibold text-blue-800 dark:text-blue-200 rounded-tl-lg">ID</th>
          <th class="p-4 text-left font-semibold text-blue-800 dark:text-blue-200">Service</th>
          <th class="p-4 text-left font-semibold text-blue-800 dark:text-blue-200 rounded-tr-lg">Prix</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-product>
        <tr class="hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-150">
          <td class="p-4">{{ product.id }}</td>
          <td class="p-4">{{ product.product }}</td>
          <td class="p-4">{{ product.price | currency:'USD':'symbol':'1.2-2' }}</td>
        </tr>
      </ng-template>
    </p-table>
  </div>

  <div class="mb-8 w-full max-w-3xl p-6 bg-gradient-to-r from-teal-50 to-emerald-50 dark:from-teal-900 dark:to-emerald-900 rounded-xl shadow-lg border-l-4 border-teal-500 dark:border-teal-700">
    <h3 class="text-2xl font-semibold mb-4 text-center text-teal-800 dark:text-teal-200">Informations Importantes</h3>
    <p class="text-gray-700 dark:text-gray-300 text-justify leading-relaxed">
      Cette section fournit des informations statiques ou des instructions importantes concernant le processus de r√©servation.
      Elle est id√©ale pour des lignes directrices, des clauses de non-responsabilit√© ou des explications d√©taill√©es.
      Le contenu peut √™tre personnalis√© dynamiquement en transmettant des donn√©es via la propri√©t√© `data` du composant parent.
    </p>
  </div>

  <div class="mb-8 w-full max-w-lg">
    <label for="responseMessage" class="block text-base font-medium mb-2 text-gray-700 dark:text-gray-300">Votre Feedback (Optionnel) :</label>
    <textarea
      id="responseMessage"
      [(ngModel)]="responseMessage"
      [rows]="4"
      [cols]="30"
      placeholder="Entrez votre feedback ici..."
      class="w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 transition-all duration-200 shadow-sm"
      [autoResize]="true"
      pTextarea
    ></textarea>
  </div>

  <div class="flex gap-4 justify-center w-full max-w-lg">
    <p-button
      label="Confirmer la R√©servation"
      (onClick)="confirmAndSend()"
      icon="pi pi-check"
      [loading]="processing()"
      class="p-button-success p-button-raised p-button-rounded shadow-lg hover:shadow-xl transition-shadow duration-300 flex-1"
    ></p-button>
    <p-button
      label="Annuler"
      (onClick)="cancel()"
      icon="pi pi-times"
      class="p-button-danger p-button-raised p-button-rounded shadow-lg hover:shadow-xl transition-shadow duration-300 flex-1"
    ></p-button>
  </div>
  <p-toast></p-toast>
</div>
